<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>白饭 - 设置</title>
<link rel="stylesheet" href="style.css" />
<script type="text/javascript">

// Saves options to localStorage.
function save_options() {
  localStorage["username"] = document.getElementById('username').value;
  localStorage["password"] = document.getElementById('password').value;

  // Update status to let user know options were saved.
  var status = document.getElementById("status");
  status.innerHTML = "bigBrother 只备案记录! 不保证通过饭否君的唷";
  setTimeout(function() {
	status.innerHTML = "";
	window.location.href= 'popup.html';
  }, 1750);
}

	var globalMsg = function(msg, style){
		var def_msg = '白白胖胖爱吃饭', 
			g_msg = document.getElementById('global_msg');
		g_msg.innerText = msg;
		g_msg.setAttribute('class', style);
		setTimeout(function(){
			g_msg.innerText = def_msg;
			g_msg.setAttribute('class', '');
		}, 3000);
	}

// Restores select box state to saved value from localStorage.
function restore_options() {
	window.onkeydown = function(e) {
		if (e.keyCode == 13) {
			save_options();
		}
	}
	var username = localStorage["username"];
	var password = localStorage["password"];
	console.log(localStorage);
	if (!username || !password) {
		globalMsg('讨厌,单子填完整的啦','error');
		return;
	}
	document.getElementById('username').value = username;
	document.getElementById('password').value = password;

}

</script>

<body onload="restore_options()">
<header>
<h1>白饭</h1>
<nav id="J_nav"></nav>
<p id="global_msg">白白胖胖爱吃饭</p>
</header>
<div class="login-setting">
	<p><input id="username" type="text" placeholder="报上名来:" /></p>
	<p><input id="password" type="password" placeholder="IP/IC/IQ卡,统统告诉我密码:" /></p>
	<p>
		<button onclick="save_options()"><span>备案记录!</span></button>
		<span id="status"></span>
	</p>
</div>
</body>
</html>
